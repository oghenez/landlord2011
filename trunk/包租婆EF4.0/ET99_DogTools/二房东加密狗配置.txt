【二房东】软件加密狗配置
====================================================================================================
PID种子：416080100100084469001（公司银行账号+3位流水号）
【产品ID】PID: 2141221B
----------------------------------------------------------------------------------------------------
SOPIN种子：420101663462759001（税务登记号+3位流水号）
【开发商密码】SOPIN：ABD5414789594810
----------------------------------------------------------------------------------------------------
【用户密码】UserPIN：8cfac3342adfee5e（随机数产生）
----------------------------------------------------------------------------------------------------
UserPIN重试次数：3（此处锁死可由SOPIN密码登陆后重置）
SOPIN重试次数：15（此处锁死只能返厂）
----------------------------------------------------------------------------------------------------
《数据区属性设置》：‘只读’（用户不可写）
----------------------------------------------------------------------------------------------------
《8个32字节HMAC_MD5密钥设置》：（随机数产生。注意，这个数应理解为密钥种子（不超过51字节即可），实际存储在狗内的密钥，是经过MD5_HMAC变换种子后得到的。）
01：d15336fef55d9053bedd65c2cb8f5a6e		----->
02：d15336fef55d9053bedd65c2cb8f5a6e		----->
03：d15336fef55d9053bedd65c2cb8f5a6e		----->8个密钥种子设定为一样，使用时用临时生成的随机数对8取模，读取
04：d15336fef55d9053bedd65c2cb8f5a6e		----->相应的index的密钥。（简单迷惑破解者）
05：d15336fef55d9053bedd65c2cb8f5a6e		----->
06：d15336fef55d9053bedd65c2cb8f5a6e		----->
07：d15336fef55d9053bedd65c2cb8f5a6e		----->
08：d15336fef55d9053bedd65c2cb8f5a6e		----->
----------------------------------------------------------------------------------------------------
《数据区根据不同版本进行设置》
数据区约定：ET99数据区有1000字节，每次读写限制长度60字节。
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
┃起始偏移地址（字节地址）：密文长度  ～～～   具体内容
┣━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
┃ 0      ：长度32   ～～～  1、【开发商密码】SOPIN的密文-->用于临时获取管理员权限，写数据，使用时需解密。（升级时、验证试用版到期时）
┃ 32     ：长度320  ～～～  2、数据库连结字符串的密文   
┃ 352    ：长度24   ～～～  3、“【测试版】、【试用版】、【标准版】、【专业版】”密文-->不同加密狗对应软件不同版本（软件直接读出显示在标题栏）
┃ 376    ：长度12   ～～～  4、源房套数限制，为0则不限制。（针对试用版或标准版）
┃ 388    ：长度12   ～～～  5、试用版本到期天数，为0则不限制。
┃ 400    ：长度24   ～～～  6、加密狗生成时间（格式类似20100118231818,意为2010-01-18 23:18:18精确到秒）
┃ 424    ：长度24   ～～～  7、试用版起始时间（格式类似20100118231818,意为2010-01-18 23:18:18精确到秒）-->开始为空，详见下面《软件到期判断策略》
┃ 448    ：长度24   ～～～  8、试用版结束时间（格式类似20100118231818,意为2010-01-18 23:18:18精确到秒）-->开始为空
┃ 472    ：长度12   ～～～  9、软件中‘数据报表’的Visible属性值‘true/false’的密文
┃ 484    ：长度     ～～～  10、升级服务器地址（保留）
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

----------------------------------------------------------------------------------------------------
《软件到期判断策略》 (可参阅‘软件试用功能时间限制方案.pdf’)
1、加密狗内用密文存储了‘生成时间’和‘到期天数’，第一次运行软件，比较当前时间是否大于加密狗生成时间，正确的话再根据当前时间和天数，
计算出‘起始时间’和‘结束时间’，写入狗内。
2、每次运行软件，比较当前时间是否大于上次存入的‘起始时间’、小于‘结束时间’，正确的话再用当前时间覆盖‘起始时间’。
----------------------------------------------------------------------------------------------------
《系统数据加解密》
1、前提：通过设定‘密钥种子’d15336fef55d9053bedd65c2cb8f5a6e，加密狗会通过HMAC-MD5计算得到32字节密钥文件，存入加密狗相应index区。
		系统加解密通过RC2算法，因为RC2算法默认密钥大小128(Bit)=16字节=加密狗通过密钥存储区内的密钥加密运算后的结果长度
2、密文形成：将字符串"武汉创方科技"与加密狗内的密钥文件通过狗的硬件加密计算得到结果（16字节），这个结果作为RC2算法的密钥，与欲加密的
		字符串一起，RC2加密计算后得到密文，存储在数据区相应的偏移地址。
3、使用时：将字符串"武汉创方科技"与加密狗内的密钥文件通过狗的硬件加密计算得到结果（16字节），这个结果作为RC2算法的密钥；再读取相应数据区
		的密文，RC2解密计算后得到明文。
4、注意：系统不用if进行条件判断，而是直接使用结果，一旦catch到出错，提示加密狗问题，退出。